{% load static %}

<footer class="bg-light text-dark pt-4 pb-4 shadow-sm mt-5">
  <div class="container">
    <div class="row justify-content-between align-items-start">
      <!-- Social Media -->
      <div class="col-md-4 mb-3">
        <h5 class="fw-bold text-success">Plant Wise</h5>
        <div class="footer-icons">
          <a href="https://facebook.com" rel="noopener noreferrer nofollow" target="_blank" class="social-icon me-3">
            <i class="bi bi-facebook fs-4"></i>
          </a>
          <a href="https://youtube.com" rel="noopener noreferrer nofollow" target="_blank" class="social-icon me-3">
            <i class="bi bi-youtube fs-4"></i>
          </a>
          <a href="https://instagram.com" rel="noopener noreferrer nofollow" target="_blank" class="social-icon me-3">
            <i class="bi bi-instagram fs-4"></i>
          </a>
        </div>
      </div>

      <!-- Privacy Policy Modal -->
      <div class="col-md-4 mb-3">
        <ul class="list-unstyled">
          <li>
            <a href="#" class="text-dark" data-bs-toggle="modal" data-bs-target="#privacyPolicyModal">
              <h6 class="fw-semibold">Privacy Policy</h6>
            </a>
          </li>
        </ul>
        <!-- Privacy Policy Modal -->
        <div class="modal fade" id="privacyPolicyModal" tabindex="-1" aria-labelledby="privacyPolicyLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="privacyPolicyLabel">
                  Privacy Policy for Plant Wise
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                {% include "includes/privacy.html" %}
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Mailchimp Newsletter -->
      <div id="mc_embed_shell" class="col-md-4 mb-3">
        <div class="col-md-6 mb-3">
          <h6 class="fw-semibold">Subscribe to our Newsletter</h6>
          <form
            id="newsletter-form"
            action="https://gmail.us17.list-manage.com/subscribe/post-json"
            method="GET"
            novalidate
          >
            <label for="mce-EMAIL" class="form-label small">
              <span class="text-danger">*</span> Email Address
            </label>
            <div class="input-group input-group-sm">
              <input
                type="email"
                name="EMAIL"
                class="form-control form-control-sm"
                placeholder="Your email"
                required
              />
              <button class="btn btn-success btn-sm" type="submit">üì©</button>
            </div>
            <small class="text-muted mt-1 mb-2 d-block" style="font-size: 0.6rem">
              <span class="text-danger">*</span> indicates required
            </small>
            <div id="newsletter-response" class="mt-2 small text-success" style="display: none;"></div>
          </form>
        </div>
      </div>
    </div>
  </div>


  <script>
  document.getElementById("newsletter-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const form = e.target;
    const email = form.EMAIL.value;
    const responseDiv = document.getElementById("newsletter-response");

    const script = document.createElement("script");

    const params = new URLSearchParams({
      u: "cb2c6a93135f8e815ce1440f5",
      id: "0eadb86777",
      EMAIL: email,
      c: "mailchimpCallback",
    });

    script.src = `https://gmail.us17.list-manage.com/subscribe/post-json?${params.toString()}`;
    document.body.appendChild(script);

    window.mailchimpCallback = function (data) {
      if (data.result === "success") {
        responseDiv.innerHTML = "‚úÖ Thank you for subscribing!";
        responseDiv.style.display = "block";
        form.reset();
      } else {
        responseDiv.innerHTML = "‚ö†Ô∏è " + data.msg;
        responseDiv.style.display = "block";
      }

      document.body.removeChild(script);
    };
  });
</script>


  <script type="text/javascript">
    (function ($) {
      window.fnames = new Array();
      window.ftypes = new Array();
      fnames[0] = "EMAIL";
      ftypes[0] = "email";
      fnames[1] = "FNAME";
      ftypes[1] = "text";
      fnames[2] = "LNAME";
      ftypes[2] = "text";
      fnames[3] = "ADDRESS";
      ftypes[3] = "address";
      fnames[4] = "PHONE";
      ftypes[4] = "phone";
      fnames[5] = "BIRTHDAY";
      ftypes[5] = "birthday";
      fnames[6] = "COMPANY";
      ftypes[6] = "text";
    })(jQuery);
    var $mcj = jQuery.noConflict(true);
  </script>

</footer>
